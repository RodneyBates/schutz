101,112c101,102
<       IF ( NOT ( IsIn ( SetPassed , Value ) ) )
<       THEN
< 
<         IF ( SetPassed . Used + 1 <= SetPassed . Size )
< 
<         THEN
< 
<           IF SetPassed . Used # 0
<           THEN
< 
<             WHILE ( i < SetPassed . Used )
<             DO
---
>       IF ( NOT ( IsIn ( SetPassed , Value ) )
>            ) THEN
114,115c104
<               IF Value . compare ( SetPassed . Elements [ i ] , Value )
<                  = CompareTyp . Greater
---
>            IF ( SetPassed . Used + 1 <= SetPassed . Size )
117c106
<               THEN
---
>       THEN
119,120c108,109
<                 EXIT
<               ;
---
>         IF SetPassed . Used # 0
>         THEN
122c111,112
<               ELSE
---
>           WHILE ( i < SetPassed . Used )
>           DO
124,125c114,115
<                 i := i + 1
<               ;
---
>             IF Value . compare ( SetPassed . Elements [ i ] , Value )
>                = CompareTyp . Greater
127c117
<               END
---
>             THEN
129,130c119,120
<             END
<           ;
---
>               EXIT
>             ;
132,133c122
<             FOR j := SetPassed . Used TO i BY - 1
<             DO
---
>             ELSE
135c124
<               SetPassed . Elements [ j ] := SetPassed . Elements [ j - 1 ]
---
>               i := i + 1
139,150d127
<           ;
< 
<             SetPassed . Elements [ i ] := Value
<           ;
< 
<             SetPassed . Used := SetPassed . Used + 1
<           ;
< 
<             flag := TRUE
<           ;
< 
<           ELSE
152,153c129,130
<             SetPassed . Elements [ 0 ] := Value
<           ;
---
>           END
>         ;
155,156c132,133
<             SetPassed . Used := SetPassed . Used + 1
<           ;
---
>           FOR j := SetPassed . Used TO i BY - 1
>           DO
158c135
<             flag := TRUE
---
>             SetPassed . Elements [ j ] := SetPassed . Elements [ j - 1 ]
162,165d138
< 
<         ELSE
< 
<           oldsize := SetPassed . Size
168c141
<           SetPassed . Size := oldsize * 2
---
>           SetPassed . Elements [ i ] := Value
171c144
<           newarray := NEW ( REF ARRAY OF ElemTyp , SetPassed . Size )
---
>           SetPassed . Used := SetPassed . Used + 1
174,175c147,148
<           WHILE ( k < SetPassed . Used )
<           DO
---
>           flag := TRUE
>         ;
177,178c150
<             newarray [ k ] := SetPassed . Elements [ k ]
<           ;
---
>         ELSE
180,181c152,153
<             k := k + 1
<           ;
---
>           SetPassed . Elements [ 0 ] := Value
>         ;
183c155
<           END
---
>           SetPassed . Used := SetPassed . Used + 1
186c158
<           SetPassed . Elements := newarray
---
>           flag := TRUE
189,190c161
<           WHILE ( i < SetPassed . Used )
<           DO
---
>         END
192,194c163
<             IF Value . compare ( SetPassed . Elements [ i ] , Value )
<                = CompareTyp . Greater
<             THEN
---
>       ELSE
196c165,166
<               EXIT
---
>         oldsize := SetPassed . Size
>       ;
198c168,169
<             ELSE
---
>         SetPassed . Size := oldsize * 2
>       ;
200,201c171,172
<               i := i + 1
<             ;
---
>         newarray := NEW ( REF ARRAY OF ElemTyp , SetPassed . Size )
>       ;
203c174,175
<             END
---
>         WHILE ( k < SetPassed . Used )
>         DO
205c177
<           END
---
>           newarray [ k ] := SetPassed . Elements [ k ]
208c180
<           j := SetPassed . Used
---
>           k := k + 1
211,212c183,184
<           WHILE ( j >= i )
<           DO
---
>         END
>       ;
214,215c186,187
<             SetPassed . Elements [ j ] := SetPassed . Elements [ j - 1 ]
<           ;
---
>         SetPassed . Elements := newarray
>       ;
217c189,200
<             j := j - 1
---
>         WHILE ( i < SetPassed . Used )
>         DO
> 
>           IF Value . compare ( SetPassed . Elements [ i ] , Value )
>              = CompareTyp . Greater
>           THEN
> 
>             EXIT
> 
>           ELSE
> 
>             i := i + 1
221d203
<         ;
223,224c205,206
<           SetPassed . Elements [ i ] := Value
<         ;
---
>         END
>       ;
226c208,214
<           SetPassed . Used := SetPassed . Used + 1
---
>         j := SetPassed . Used
>       ;
> 
>         WHILE ( j >= i )
>         DO
> 
>           SetPassed . Elements [ j ] := SetPassed . Elements [ j - 1 ]
229c217
<           flag := TRUE
---
>           j := j - 1
232a221
>       ;
234c223,227
<       ELSE
---
>         SetPassed . Elements [ i ] := Value
>       ;
> 
>         SetPassed . Used := SetPassed . Used + 1
>       ;
236c229
<         flag := FALSE
---
>         flag := TRUE
240d232
<     ;
242,243c234,237
<       RETURN flag
<     ;
---
>     ELSE
> 
>     flag := FALSE
>   ;
245c239,241
<     END InsertElem
---
>   END ;
> 
> RETURN flag
248c244
<   PROCEDURE IsIn ( SetPassed : T ; Value : ElemTyp ) : BOOLEAN
---
> END InsertElem ;
250,251c246
<   = VAR high : INTEGER := SetPassed . Used - 1
<   ;
---
> PROCEDURE IsIn ( SetPassed : T ; Value : ElemTyp ) : BOOLEAN
253,254c248
<     VAR low : INTEGER := 0
<   ;
---
> = VAR high : INTEGER := SetPassed . Used - 1 ;
256,257c250
<     VAR mid : INTEGER := 0
<   ;
---
> VAR low : INTEGER := 0 ;
259c252
<     BEGIN
---
> VAR mid : INTEGER := 0 ;
261,262c254
<       IF SetPassed . Used # 0
<       THEN
---
> BEGIN
264,265c256
<         WHILE high >= low
<         DO
---
> IF SetPassed . Used # 0 THEN
267,268c258
<           mid := ( high + low ) DIV 2
<         ;
---
> WHILE high >= low DO
270,271c260
<           IF Value . compare ( SetPassed . Elements [ mid ] , Value )
<              = CompareTyp . Equal
---
> mid := ( high + low ) DIV 2 ;
273,275c262
<           THEN
<             RETURN TRUE
<           ;
---
> IF Value . compare ( SetPassed . Elements [ mid ] , Value ) = CompareTyp . Equal
277c264
<           ELSE
---
> THEN RETURN TRUE ;
279,280c266
<             IF Value . compare ( SetPassed . Elements [ mid ] , Value )
<                = CompareTyp . Less
---
> ELSE
282c268
<             THEN
---
> IF Value . compare ( SetPassed . Elements [ mid ] , Value ) = CompareTyp . Less
284,285c270
<               low := mid + 1
<             ;
---
> THEN
287c272
<             ELSE
---
> low := mid + 1 ;
289,290c274
<               high := mid - 1
<             ;
---
> ELSE
292c276
<             END
---
> high := mid - 1 ;
294c278
<           END
---
> END
296c280
<         END
---
> END
298,299c282
<       END
<     ;
---
> END
301,302c284
<       RETURN FALSE
<     ;
---
> END ;
304,305c286
<     END IsIn
< ;
---
> RETURN FALSE ;
306a288
> END IsIn ;
308d289
<   PROCEDURE RemoveElem ( SetPassed : T ; Value : ElemTyp ) : BOOLEAN
310,311c291
<   = VAR high : INTEGER := SetPassed . Used - 1
<   ;
---
> PROCEDURE RemoveElem ( SetPassed : T ; Value : ElemTyp ) : BOOLEAN
312a293
> = VAR high : INTEGER := SetPassed . Used - 1 ;
314,315d294
<     VAR low : INTEGER := 0
<   ;
317,318c296
<     VAR mid : INTEGER := 0
<   ;
---
> VAR low : INTEGER := 0 ;
320,321c298
<     VAR i : INTEGER := 0
<   ;
---
> VAR mid : INTEGER := 0 ;
323,324c300
<     VAR flag : BOOLEAN := FALSE
<   ;
---
> VAR i : INTEGER := 0 ;
325a302
> VAR flag : BOOLEAN := FALSE ;
328d304
<     BEGIN
330,331c306
<       WHILE high >= low
<       DO
---
> BEGIN
332a308
> WHILE high >= low DO
334,335d309
<         mid := ( high + low ) DIV 2
<       ;
337,339c311
<         IF Value . compare ( SetPassed . Elements [ mid ] , Value )
<            = CompareTyp . Equal
<         THEN
---
> mid := ( high + low ) DIV 2 ;
341,342c313,314
<           flag := TRUE
<         ;
---
> IF Value . compare ( SetPassed . Elements [ mid ] , Value ) = CompareTyp . Equal
> THEN
344,345c316
<           EXIT
<         ;
---
> flag := TRUE ;
347c318
<         ELSE
---
> EXIT ;
349,351c320
<           IF Value . compare ( SetPassed . Elements [ mid ] , Value )
<              = CompareTyp . Less
<           THEN
---
> ELSE
353,354c322,323
<             low := mid + 1
<           ;
---
> IF Value . compare ( SetPassed . Elements [ mid ] , Value ) = CompareTyp . Less
> THEN
356c325
<           ELSE
---
> low := mid + 1 ;
358,359c327
<             high := mid - 1
<           ;
---
> ELSE
361c329
<           END
---
> high := mid - 1 ;
363c331
<         END
---
> END
365,366c333
<       END
<     ;
---
> END
368,369c335
<       IF flag = TRUE
<       THEN
---
> END ;
371,372c337
<         i := mid
<       ;
---
> IF flag = TRUE THEN
374,375c339
<         WHILE ( i < SetPassed . Used )
<         DO
---
> i := mid ;
377,378c341
<           SetPassed . Elements [ i ] := SetPassed . Elements [ i + 1 ]
<         ;
---
> WHILE ( i < SetPassed . Used ) DO
380,381c343
<           i := i + 1
<         ;
---
> SetPassed . Elements [ i ] := SetPassed . Elements [ i + 1 ] ;
383,384c345
<         END
<       ;
---
> i := i + 1 ;
386,387c347
<         SetPassed . Used := SetPassed . Used - 1
<       ;
---
> END ;
389,390c349
<       END
<     ;
---
> SetPassed . Used := SetPassed . Used - 1 ;
392,393c351
<       RETURN flag
<     ;
---
> END ;
395,396c353
<     END RemoveElem
< ;
---
> RETURN flag ;
397a355
> END RemoveElem ;
399d356
<   PROCEDURE Cardinality ( SetPassed : T ) : INTEGER
401c358
<   = BEGIN
---
> PROCEDURE Cardinality ( SetPassed : T ) : INTEGER
403,404c360
<       RETURN SetPassed . Used
<     ;
---
> = BEGIN
406,407c362,364
<     END Cardinality
< ;
---
> RETURN SetPassed . Used ;
> 
> END Cardinality ;
410c367
<   BEGIN
---
> BEGIN
412,413c369
<   END Set
< .
---
> END Set .
test12_136.export.m3 not as expected
######################### F A I L E D #########################
----------------------------- Failed in /home/rodney/proj/lbe/git/test/12/test12_136
